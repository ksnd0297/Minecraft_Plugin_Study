package com.tistory.cchplugin.cchlecture.event;

import java.util.HashMap;
import java.util.UUID;

import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.block.BlockBreakEvent;
import org.bukkit.event.player.PlayerJoinEvent;

import com.tistory.cchplugin.cchlecture.Main;

import net.md_5.bungee.api.ChatColor;

public class Event implements Listener {

	public static Main plugin;
	
	HashMap<UUID, Integer> map = new HashMap<UUID, Integer>();

	public static void setPlugin(Main MainPlugin) {
		plugin = MainPlugin;
	}
	
	@EventHandler
	// PlayerJoinEvent : Player�� ������ �� �����ִ� �̺�Ʈ
	public void join(PlayerJoinEvent e) {

		UUID uuid = e.getPlayer().getUniqueId();
		String welcome = this.getConfig().getString("JoinMessage");

		if (map.containsKey(uuid)) {
			map.put(uuid, map.get(uuid) + 1);
		} else {
			map.put(uuid, 1);
		}

		int count = map.get(uuid);

		e.setJoinMessage(ChatColor.RED + (count + welcome));
	}

	@EventHandler
	public void breakBlock(BlockBreakEvent e) {
		String msg1 = this.getConfig().getString("BlockMessage.First");
		String msg2 = this.getConfig().getString("BlockMessage.Second");
		e.getPlayer().sendMessage(msg1);
		e.getPlayer().sendMessage(msg2);
	}

}
